/** jQuery Schedule v2.0.0 | https://github.com/Yehzuna/jquery-schedule */
!function(t,i,e,o){"use strict";function n(i,e){this.element=i,this.settings=t.extend({},r,e),this.init()}var r={mode:"edit",hour:24,data:[],days:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],onInit:function(){},onAddPeriod:function(){},onRemovePeriod:function(){},onPeriodClicked:function(){}};t.extend(n.prototype,{seed:Math.random().toString(36).substr(2),counter:0,uniqId:function(){return this.counter++,"jqs_"+this.seed+"_"+this.counter},init:function(){var i=this;t(this.element).addClass("jqs"),"edit"===this.settings.mode&&(t(this.element).on("click",".jqs-day",function(e){if(t(e.target).hasClass("jqs-period")||t(e.target).parents(".jqs-period").length>0)return!1;var o=Math.round(e.offsetY/20);o>=48&&(o=47),i.add(t(this),o,1)}),t(this.element).on("click",".jqs-remove",function(){var e=t(this).parents(".jqs-period");i.settings.onRemovePeriod.call(this,e,i.element)||e.remove()})),this.create(),this.generate(),this.settings.onInit.call(this,this.element)},create:function(){t("<table class='jqs-table'><tr></tr></table>").appendTo(t(this.element));for(var i=0;i<7;i++)t("<td><div class='jqs-day'></div></td>").appendTo(t(".jqs-table tr",this.element));t("<div class='jqs-grid'><div class='jqs-grid-head'></div></div>").appendTo(t(this.element));for(var e=0;e<25;e++)t("<div class='jqs-grid-line'><div class='jqs-grid-hour'>"+this.formatHour(e)+"</div></div>").appendTo(t(".jqs-grid",this.element));for(var o=0;o<7;o++)t("<div class='jqs-grid-day'>"+this.settings.days[o]+"</div>").appendTo(t(".jqs-grid-head",this.element))},generate:function(){if(this.settings.data.length>0){var i=this;t.each(this.settings.data,function(e,o){t.each(o.periods,function(e,n){var r=t(".jqs-day",i.element).eq(o.day),s=i.positionFormat(n[0]),a=i.positionFormat(n[1]);0===a&&(a=48),i.add(r,s,a-s)})})}},add:function(i,e,o){if(o<=0)return console.error("Invalid period."),!1;var n="";"edit"===this.settings.mode&&(n="<div class='jqs-remove'></div>");var r="<div class='jqs-period-title'>"+this.periodInit(e,e+o)+"</div>",s=t("<div class='jqs-period'><div class='jqs-period-container'>"+n+r+"</div></div>").css({top:20*e,height:20*o}).attr("id",this.uniqId()).appendTo(i);if(!this.isValid(s))return console.error("Invalid period.",this.periodInit(e,e+o)),t(s).remove(),!1;if("edit"===this.settings.mode){var a=this;s.draggable({grid:[0,20],containment:"parent",drag:function(i,e){t(".jqs-period-title",e.helper).text(a.periodDrag(e))},stop:function(i,e){a.isValid(t(e.helper))||(console.error("Invalid position."),t(e.helper).css("top",Math.round(e.originalPosition.top)))}}).resizable({grid:[0,20],containment:"parent",handles:"n, s",resize:function(i,e){t(".jqs-period-title",e.helper).text(a.periodResize(e))},stop:function(i,e){a.isValid(t(e.helper))||(console.log("Invalid position."),t(e.helper).css({height:Math.round(e.originalSize.height),top:Math.round(e.originalPosition.top)}))}}).click(function(t){a.settings.onPeriodClicked.call(this,t,s,a.element)})}return this.settings.onAddPeriod.call(this,s,this.element),!0},periodInit:function(t,i){return this.periodFormat(t)+" - "+this.periodFormat(i)},periodDrag:function(i){var e=Math.round(i.position.top/20),o=Math.round((t(i.helper).height()+i.position.top)/20);return this.periodFormat(e)+" - "+this.periodFormat(o)},periodResize:function(t){var i=Math.round(t.position.top/20),e=Math.round((t.size.height+t.position.top)/20);return this.periodFormat(i)+" - "+this.periodFormat(e)},periodData:function(t){var i=Math.round(t.position().top/20),e=Math.round((t.height()+t.position().top)/20);return[this.periodFormat(i),this.periodFormat(e)]},periodFormat:function(t){var i=0;if(12===this.settings.hour){var e=Math.floor(t/2),o=":30";t%2==0&&(o=""),i=e+o+"am",e>12&&(i=e-12+o+"pm"),0!==e&&24!==e||(i=12+o+"am"),12===e&&(i=12+o+"pm")}else t>=48&&(t=0),(i=Math.floor(t/2))<10&&(i="0"+i),i+=t%2==0?":00":":30";return i},positionFormat:function(t){var i=0;if(12===this.settings.hour){var e=t.match(/([0-1]?[0-9]):?([0-5][0-9])?\s?(am|pm)/),o=parseInt(e[1]),n=parseInt(e[2]),r=e[3];12===o&&"am"===r&&(o=0),12===o&&"pm"===r&&(r="am"),"pm"===r&&(o+=12),i=2*o,30===n&&i++}else{var s=t.split(":");i=2*parseInt(s[0]),30===parseInt(s[1])&&i++}return i},formatHour:function(t){if(12===this.settings.hour)switch(t){case 0:case 24:t="12 am";break;case 12:t="12 pm";break;default:t>12?t=t-12+" pm":t+=" am"}else t>=24&&(t=0),t<10&&(t="0"+t),t+=":00";return t},isValid:function(i){var e=Math.round(i.position().top),o=Math.round(i.position().top+i.height()),n=0,r=0,s=!0;return t(".jqs-period",t(i).parent()).each(function(a,d){i.attr("id")!==t(d).attr("id")&&(n=Math.round(t(d).position().top),r=Math.round(t(d).position().top+t(d).height()),n>e&&n<o&&(s=!1),r>e&&r<o&&(s=!1),n<e&&r>o&&(s=!1),n!==e&&r!==o||(s=!1))}),s},export:function(){var i=this,e=[];return t(".jqs-day",i.element).each(function(o,n){var r=[];t(".jqs-period",n).each(function(e,o){r.push(i.periodData(t(o)))}),e.push({day:o,periods:r})}),JSON.stringify(e)},import:function(i){var e=this,o=i[1],n=[];return t.each(o,function(i,o){t.each(o.periods,function(i,r){var s=t(".jqs-day",e.element).eq(o.day),a=e.positionFormat(r[0]),d=e.positionFormat(r[1]);0===d&&(d=48);var h=!0;e.add(s,a,d-a)||(h=!1),n.push({day:o.day,period:[e.periodFormat(a),e.periodFormat(d)],status:h})})}),JSON.stringify(n)},reset:function(){t(".jqs-period",this.element).remove()}}),t.fn.jqs=function(i){var e=!1,o=Array.prototype.slice.call(arguments),r=this.each(function(){t.data(this,"plugin_jqs")?t.isFunction(n.prototype[i])&&(e=t.data(this,"plugin_jqs")[i](o)):t.data(this,"plugin_jqs",new n(this,i))});return e||r}}(jQuery,window,document);