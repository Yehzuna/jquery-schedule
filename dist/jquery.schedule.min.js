/** jQuery Schedule v2.0.0 | https://github.com/Yehzuna/jquery-schedule */
!function(t,i,e,o){"use strict";function s(i,e){this.element=i,this.settings=t.extend({},r,e),this.periodOptions={title:this.settings.periodTitle,backgroundColor:this.settings.periodBackgroundColor,borderColor:this.settings.periodBorderColor,textColor:this.settings.periodTextColor},this.init()}var r={mode:"edit",hour:24,periodDuration:30,data:[],periodOptions:!0,periodColors:[],periodTitle:"",periodBackgroundColor:"rgba(82, 155, 255, 0.5)",periodBorderColor:"#2a3cff",periodTextColor:"#000",periodRemoveButton:"Remove",periodTitlePlaceholder:"Title",days:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],onInit:function(){},onAddPeriod:function(){},onRemovePeriod:function(){},onClickPeriod:function(){}};t.extend(s.prototype,{seed:Math.random().toString(36).substr(2),counter:0,periodInterval:0,periodHeight:0,periodPosition:0,uniqId:function(){return this.counter++,"jqs_"+this.seed+"_"+this.counter},init:function(){var i=this;if(-1===t.inArray(this.settings.periodDuration,[15,30,60]))throw new Error("Invalid periodDuration");if(this.periodInterval=60/this.settings.periodDuration,this.periodHeight=24*this.periodInterval,this.periodPosition=40/this.periodInterval,t(this.element).addClass("jqs").addClass("jqs-interval-"+this.settings.periodDuration),"edit"===this.settings.mode){var e=0;t(this.element).on("mousedown",".jqs-day",function(t){e=Math.floor(t.offsetY/i.periodPosition)}),t(this.element).on("mouseup",".jqs-day",function(o){if(!t(o.target).hasClass("jqs-period")&&0===t(o.target).parents(".jqs-period").length){var s=Math.round(o.offsetY/i.periodPosition)-e;s<=0&&(s=1),i.add(t(this),e,s)}}),this.settings.periodOptions||t(this.element).on("click",".jqs-remove",function(){var e=t(this).parents(".jqs-period");i.settings.onRemovePeriod.call(this,e,i.element)||e.remove()})}this.create(),this.generate(),this.settings.onInit.call(this,this.element)},create:function(){t("<table class='jqs-table'><tr></tr></table>").appendTo(t(this.element));for(var i=0;i<7;i++)t("<td><div class='jqs-day'></div></td>").appendTo(t(".jqs-table tr",this.element));t("<div class='jqs-grid'><div class='jqs-grid-head'></div></div>").appendTo(t(this.element));for(var e=0;e<25;e++)t("<div class='jqs-grid-line'><div class='jqs-grid-hour'>"+this.formatHour(e)+"</div></div>").appendTo(t(".jqs-grid",this.element));for(var o=0;o<7;o++)t("<div class='jqs-grid-day'>"+this.settings.days[o]+"</div>").appendTo(t(".jqs-grid-head",this.element))},generate:function(){if(this.settings.data.length>0){var i=this;t.each(this.settings.data,function(e,o){t.each(o.periods,function(e,s){var r=t(".jqs-day",i.element).eq(o.day),n=i.positionFormat(s[0]),d=i.positionFormat(s[1]);0===d&&(d=i.periodHeight),i.add(r,n,d-n)})})}},add:function(i,e,o,s){if(o<=0||e>=this.periodHeight)return!1;s=t.extend({},this.periodOptions,s);var r="";this.settings.periodOptions||"edit"!==this.settings.mode||(r="<div class='jqs-period-remove' title='"+this.settings.periodRemoveButton+"'></div>");var n="<div class='jqs-period-title'>"+s.title+"</div>",d="<div class='jqs-period-time'>"+this.periodInit(e,e+o)+"</div>",a=t("<div class='jqs-period'><div class='jqs-period-container'>"+d+n+r+"</div></div>").css({top:e*this.periodPosition,height:o*this.periodPosition}).attr("id",this.uniqId()).attr("title",s.title).appendTo(i);if(t(".jqs-period-container",a).css({"background-color":s.backgroundColor,"border-color":s.borderColor,color:s.textColor}),!this.isValid(a))return t(a).remove(),!1;if(this.periodText(a),"edit"===this.settings.mode){var p=this;a.draggable({grid:[0,this.periodPosition],containment:"parent",drag:function(i,e){t(".jqs-period-time",e.helper).text(p.periodDrag(e))},stop:function(i,e){p.isValid(t(e.helper))||t(e.helper).css("top",Math.round(e.originalPosition.top))}}).resizable({grid:[0,this.periodPosition],containment:"parent",handles:"n, s",resize:function(i,e){t(".jqs-period-time",e.helper).text(p.periodResize(e)),p.periodText(a)},stop:function(i,e){p.isValid(t(e.helper))||t(e.helper).css({height:Math.round(e.originalSize.height),top:Math.round(e.originalPosition.top)})}}),this.settings.periodOptions&&a.click(function(t){p.settings.onClickPeriod.call(this,t,a,p.element),p.openOptions(t,a)})}return this.settings.onAddPeriod.call(this,a,this.element),!0},openOptions:function(i,e){var o=this;o.closeOptions();var s=e.offset().top-t(this.element).offset().top+t(this.element).scrollTop()-20;s<20&&(s=20),s>850&&(s=850);var r=t(this.element).width()-290,n=e.offset().left-t(this.element).offset().left+e.width()+20;n>r&&(n=n-330-e.width());var d=t("jqs-period-title",e).text(),a="<div class='jqs-title-container'><input type='text' placeholder='"+this.settings.periodTitlePlaceholder+"' value='"+d+"' class='jqs-title'></div>",p="";if(this.settings.periodColors&&this.settings.periodColors.length>0){var h=12===this.settings.hour?"12pm":"00:00";p="<div class='jqs-colors-container'>",t.each(this.settings.periodColors,function(t,i){p+="<button class='jqs-color' style='background-color: "+i[0]+"; border-color: "+i[1]+"; color:"+i[2]+"'>"+h+"</button>"}),p+="</div>"}var l="<div class='jqs-remove'>"+this.settings.periodRemoveButton+"</div>";t("<div class='jqs-options'>"+a+p+l+"<div class='jqs-close'></div></div>").css({top:s,left:n}).appendTo(this.element),t(".jqs-options .jqs-color",this.element).click(function(){t(".jqs-period-container",e).css({"background-color":t(this).css("background-color"),"border-color":t(this).css("border-top-color"),color:t(this).css("color")})}),t(".jqs-options .jqs-title",this.element).keyup(function(){t(".jqs-period-title",e).text(t(this).val()),e.attr("title",t(this).val())}),t(".jqs-options .jqs-remove",this.element).click(function(){o.settings.onRemovePeriod.call(this,e,o.element)||(e.remove(),o.closeOptions())}),t(".jqs-options .jqs-close",this.element).click(function(){o.closeOptions()})},closeOptions:function(){t(".jqs-options",this.element).remove()},periodInit:function(t,i){return this.periodFormat(t)+" - "+this.periodFormat(i)},periodDrag:function(i){var e=Math.round(i.position.top/this.periodPosition),o=Math.round((t(i.helper).height()+i.position.top)/this.periodPosition);return this.periodFormat(e)+" - "+this.periodFormat(o)},periodResize:function(t){var i=Math.round(t.position.top/this.periodPosition),e=Math.round((t.size.height+t.position.top)/this.periodPosition);return this.periodFormat(i)+" - "+this.periodFormat(e)},periodText:function(i){var e=i.height();if(i.removeClass("min").removeClass("small"),10===e)return i.addClass("min"),!1;if(20===e)return i.addClass("small"),!1;var o=12*Math.floor((e-16-4)/12);t(".jqs-period-title",i).height(o)},periodData:function(i){var e=Math.round(i.position().top/this.periodPosition),o=Math.round((i.height()+i.position().top)/this.periodPosition);return{start:this.periodFormat(e),end:this.periodFormat(o),title:t(".jqs-period-title",i).text(),backgroundColor:t(".jqs-period-container",i).css("background-color"),borderColor:t(".jqs-period-container",i).css("border-top-color"),textColor:t(".jqs-period-container",i).css("color")}},periodFormat:function(t){t>=this.periodHeight&&(t=0);var i=Math.floor(t/this.periodInterval),e=60*(t/this.periodInterval-i);if(12===this.settings.hour){var o=i,s="";return i>=12&&(s="p"),i>12&&(o=i-12),0!==i&&24!==i||(s="",o=12),0!==e&&(o+=":"+e),o+s}return i<10&&(i="0"+i),e<10&&(e="0"+e),i+":"+e},positionFormat:function(t){var i=t.split(":"),e=parseInt(i[0]),o=parseInt(i[1]);if(12===this.settings.hour){var s=t.match(/([0-1]?[0-9]):?([0-5][0-9])?\s?(am|pm|p)?/),r=s[3];r||(r="am"),e=parseInt(s[1]),(o=parseInt(s[2]))||(o=0),12===e&&"am"===r&&(e=0),12!==e||"pm"!==r&&"p"!==r||(r="am"),"pm"!==r&&"p"!==r||(e+=12)}var n=0;return n+=e*this.periodInterval,n+=o/60*this.periodInterval,Math.floor(n)!==n?-1:n},formatHour:function(t){if(12===this.settings.hour)switch(t){case 0:case 24:t="12am";break;case 12:t="12pm";break;default:t>12?t=t-12+"pm":t+="am"}else t>=24&&(t=0),t<10&&(t="0"+t),t+=":00";return t},isValid:function(i){var e=Math.round(i.position().top),o=Math.round(i.position().top+i.height()),s=0,r=0,n=!0;return t(".jqs-period",t(i).parent()).each(function(d,a){i.attr("id")!==t(a).attr("id")&&(s=Math.round(t(a).position().top),r=Math.round(t(a).position().top+t(a).height()),s>e&&s<o&&(n=!1),r>e&&r<o&&(n=!1),s<e&&r>o&&(n=!1),s!==e&&r!==o||(n=!1))}),n},export:function(){var i=this,e=[];return t(".jqs-day",i.element).each(function(o,s){var r=[];t(".jqs-period",s).each(function(e,o){r.push(i.periodData(t(o)))}),e.push({day:o,periods:r})}),JSON.stringify(e)},import:function(i){var e=this,o=i[1],s=[];return t.each(o,function(i,o){t.each(o.periods,function(i,r){var n=t(".jqs-day",e.element).eq(o.day),d=e.positionFormat(r.start),a=e.positionFormat(r.end);0===a&&(a=e.periodHeight);var p=!0;e.add(n,d,a-d,r)||(p=!1),s.push({day:o.day,period:[e.periodFormat(d),e.periodFormat(a)],status:p})})}),JSON.stringify(s)},reset:function(){t(".jqs-period",this.element).remove()}}),t.fn.jqs=function(i){var e=!1,o=Array.prototype.slice.call(arguments),r=this.each(function(){t.data(this,"plugin_jqs")?t.isFunction(s.prototype[i])&&(e=t.data(this,"plugin_jqs")[i](o)):t.data(this,"plugin_jqs",new s(this,i))});return e||r}}(jQuery,window,document);