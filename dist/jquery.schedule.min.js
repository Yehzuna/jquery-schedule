/** jQuery Schedule v2.2.0 | https://github.com/Yehzuna/jquery-schedule */
!function(t,i,e,o){"use strict";function s(i,e){this.element=i,this.settings=t.extend({},r,e),this.periodOptions={title:this.settings.periodTitle,backgroundColor:this.settings.periodBackgroundColor,borderColor:this.settings.periodBorderColor,textColor:this.settings.periodTextColor},this.init()}var r={mode:"edit",hour:24,days:7,periodDuration:30,data:[],periodOptions:!0,periodColors:[],periodTitle:"",periodBackgroundColor:"rgba(82, 155, 255, 0.5)",periodBorderColor:"#2a3cff",periodTextColor:"#000",periodRemoveButton:"Remove",periodDuplicateButton:"Duplicate",periodTitlePlaceholder:"Title",daysList:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],onInit:function(){},onAddPeriod:function(){},onRemovePeriod:function(){},onDuplicatePeriod:function(){},onClickPeriod:function(){}};t.extend(s.prototype,{seed:Math.random().toString(36).substr(2),counter:0,periodInterval:0,periodHeight:0,periodPosition:0,uniqId:function(){return this.counter++,"jqs_"+this.seed+"_"+this.counter},init:function(){var i=this;if(this.settings.periodColors.length>0&&t.each(this.settings.periodColors,function(i,e){if(!t.inArray(e)||3!==e.length)throw new Error("Invalid periodColors")}),-1===t.inArray(this.settings.periodDuration,[15,30,60]))throw new Error("Invalid periodDuration");if(this.periodInterval=60/this.settings.periodDuration,this.periodHeight=24*this.periodInterval,this.periodPosition=40/this.periodInterval,t(this.element).addClass("jqs").addClass("jqs-mode-"+this.settings.mode).addClass("jqs").addClass("jqs-mode-"+this.settings.days),"edit"===this.settings.mode){var e=0,o=!1;t(this.element).on("mousedown",".jqs-day",function(s){var r=s.pageY-t(this).offset().top;if(e=Math.floor(r/i.periodPosition),!t(s.target).hasClass("jqs-period")&&0===t(s.target).parents(".jqs-period").length){var n="";15!==i.settings.periodDuration&&(n=i.periodInit(e,e+1)),o=t("<div>").addClass("jqs-period-helper").css({height:i.periodPosition,top:e*i.periodPosition}).append('<div class="jqs-period-helper-time">'+n+"</div>"),t(this).append(o)}}),t(this.element).on("mousemove",".jqs-day",function(s){if(o){var r=s.pageY-t(this).offset().top,n=Math.round(r/i.periodPosition)-e;n<=0&&(n=1),o.css({height:n*i.periodPosition}),n>=1?t(".jqs-period-helper-time",o).text(i.periodInit(e,e+n)):t(".jqs-period-helper-time",o).text("")}}),t(this.element).on("mouseup",".jqs-day",function(s){if(!t(s.target).hasClass("jqs-period")&&0===t(s.target).parents(".jqs-period").length){var r=s.pageY-t(this).offset().top,n=Math.round(r/i.periodPosition)-e;n<=0&&(n=1),i.add(t(this),e,n)}e=0,o&&(o.remove(),o=!1)}),t(this.element).on("mouseenter",".jqs-day",function(){var e=t(this).parents("td").index();t(".jqs-grid-day",i.element).eq(e).addClass("jqs-grid-day-buttons")}),t(this.element).on("mouseleave",".jqs-day",function(){var e=t(this).parents("td").index();t(".jqs-grid-day",i.element).eq(e).removeClass("jqs-grid-day-buttons")}),t(this.element).on("click",".jqs-period-remove",function(){var e=t(this).parents(".jqs-period");i.remove(e)}),t(this.element).on("click",".jqs-period-duplicate",function(){var e=t(this).parents(".jqs-period");i.duplicate(e)}),t(this.element).on("click",".jqs-day-remove",function(){var e=t(this).parents(".jqs-grid-day").index(),o=t(".jqs-day",i.element).eq(e);i.removeAll(o)}),t(this.element).on("click",".jqs-day-duplicate",function(){var e=t(this).parents(".jqs-grid-day").index(),o=t(".jqs-day",i.element).eq(e);i.duplicateAll(o)})}this.create(),this.generate(),this.settings.onInit.call(this,this.element)},create:function(){t('<table class="jqs-table"><tr></tr></table>').appendTo(t(this.element));for(var i=0;i<this.settings.days;i++)t('<td><div class="jqs-day"></div></td>').appendTo(t(".jqs-table tr",this.element));t('<div class="jqs-grid"><div class="jqs-grid-head"></div></div>').appendTo(t(this.element));for(var e=0;e<25;e++)t('<div class="jqs-grid-line"><div class="jqs-grid-hour">'+this.formatHour(e)+"</div></div>").appendTo(t(".jqs-grid",this.element));var o="",s="";"edit"===this.settings.mode&&(o='<div class="jqs-day-remove" title="'+this.settings.periodRemoveButton+'"></div>',s='<div class="jqs-day-duplicate" title="'+this.settings.periodDuplicateButton+'"></div>');for(var r=0;r<this.settings.days;r++)t('<div class="jqs-grid-day">'+this.settings.daysList[r]+o+s+"</div>").appendTo(t(".jqs-grid-head",this.element))},generate:function(){if(this.settings.data.length>0){var i=this;t.each(this.settings.data,function(e,o){t.each(o.periods,function(e,s){var r,n,d=t(".jqs-day",i.element).eq(o.day),a={};t.isArray(s)?(n=i.positionFormat(s[0]),r=i.positionFormat(s[1])):(n=i.positionFormat(s.start),r=i.positionFormat(s.end),a=s),0===r&&(r=i.periodHeight),i.add(d,n,r-n,a)})})}},add:function(i,e,o,s){if(o<=0||e>=this.periodHeight)return!1;s=t.extend({},this.periodOptions,s);var r="",n="";"edit"===this.settings.mode&&(r='<div class="jqs-period-remove" title="'+this.settings.periodRemoveButton+'"></div>',n='<div class="jqs-period-duplicate" title="'+this.settings.periodDuplicateButton+'"></div>');var d='<div class="jqs-period-title">'+s.title+"</div>",a='<div class="jqs-period-time">'+this.periodInit(e,e+o)+"</div>",p=t('<div class="jqs-period"><div class="jqs-period-container">'+a+d+r+n+"</div></div>").css({top:e*this.periodPosition,height:o*this.periodPosition}).attr("id",this.uniqId()).attr("title",s.title).appendTo(i);if(t(".jqs-period-container",p).css({"background-color":s.backgroundColor,"border-color":s.borderColor,color:s.textColor}),!this.isValid(p))return t(p).remove(),!1;if(this.periodText(p),"edit"===this.settings.mode){var l=this;p.draggable({grid:[0,this.periodPosition],containment:"parent",drag:function(i,e){t(".jqs-period-time",e.helper).text(l.periodDrag(e)),l.closeOptions()},stop:function(i,e){l.isValid(t(e.helper))||t(e.helper).css("top",Math.round(e.originalPosition.top))}}).resizable({grid:[0,this.periodPosition],containment:"parent",handles:"n, s",resize:function(i,e){t(".jqs-period-time",e.helper).text(l.periodResize(e)),l.periodText(p),l.closeOptions()},stop:function(i,e){l.isValid(t(e.helper))||t(e.helper).css({height:Math.round(e.originalSize.height),top:Math.round(e.originalPosition.top)})}}),this.settings.periodOptions&&p.click(function(i){t(i.target).hasClass("jqs-period-remove")&&t(i.target).hasClass("jqs-period-duplicate")||(l.settings.onClickPeriod.call(this,i,p,l.element),l.openOptions(i,p))})}return this.settings.onAddPeriod.call(this,p,this.element),!0},remove:function(t){this.settings.onRemovePeriod.call(this,t,this.element)||(t.remove(),this.closeOptions())},removeAll:function(i){var e=this;t(".jqs-period",i).each(function(t,i){e.remove(i)})},duplicate:function(i){if(!this.settings.onDuplicatePeriod.call(this,i,this.element)){var e=this.periodData(i),o=Math.round(i.position().top/this.periodPosition),s=Math.round(i.height()/this.periodPosition),r=this;t(".jqs-day",this.element).each(function(t,i){r.add(i,o,s,e)}),this.closeOptions()}},duplicateAll:function(i){var e=this;t(".jqs-period",i).each(function(i,o){e.duplicate(t(o))})},openOptions:function(i,e){var o=this;o.closeOptions();var s=e.offset().top-t(this.element).offset().top+t(this.element).scrollTop()-20;s<20&&(s=20),s>850&&(s=850);var r=t(this.element).width()-290,n=e.offset().left-t(this.element).offset().left+e.width()+20;n>r&&(n=n-330-e.width());var d=Math.round(e.position().top/this.periodPosition),a=Math.round(e.height()/this.periodPosition),p='<div class="jqs-options-time">'+this.periodInit(d,d+a)+"</div>",l=t("jqs-period-title",e).text(),h='<div class="jqs-options-title-container"><input type="text" placeholder="'+this.settings.periodTitlePlaceholder+'" value="'+l+'" class="jqs-options-title"></div>',c="";if(this.settings.periodColors&&this.settings.periodColors.length>0){var u=12===this.settings.hour?"12pm":"00:00";c='<div class="jqs-options-color-container">',t.each(this.settings.periodColors,function(t,i){c+='<button class="jqs-options-color" style="background-color: '+i[0]+"; border-color: "+i[1]+"; color:"+i[2]+'">'+u+"</button>"}),c+="</div>"}var v='<div class="jqs-options-remove">'+this.settings.periodRemoveButton+"</div>",m='<div class="jqs-options-duplicate">'+this.settings.periodDuplicateButton+"</div>";t('<div class="jqs-options">'+p+h+c+v+m+'<div class="jqs-options-close"></div></div>').css({top:s,left:n}).appendTo(this.element),t(".jqs-options-color",this.element).click(function(){t(".jqs-period-container",e).css({"background-color":t(this).css("background-color"),"border-color":t(this).css("border-top-color"),color:t(this).css("color")})}),t(".jqs-options-title",this.element).keyup(function(){t(".jqs-period-title",e).text(t(this).val()),e.attr("title",t(this).val())}),t(".jqs-options-remove",this.element).click(function(){o.remove(e)}),t(".jqs-options-duplicate",this.element).click(function(){o.duplicate(e)}),t(".jqs-options-close",this.element).click(function(){o.closeOptions()})},closeOptions:function(){t(".jqs-options",this.element).remove()},periodInit:function(t,i){return this.periodFormat(t)+" - "+this.periodFormat(i)},periodDrag:function(i){var e=Math.round(i.position.top/this.periodPosition),o=Math.round((t(i.helper).height()+i.position.top)/this.periodPosition);return this.periodFormat(e)+" - "+this.periodFormat(o)},periodResize:function(t){var i=Math.round(t.position.top/this.periodPosition),e=Math.round((t.size.height+t.position.top)/this.periodPosition);return this.periodFormat(i)+" - "+this.periodFormat(e)},periodText:function(i){var e=i.height();if(i.removeClass("jqs-period-15").removeClass("jqs-period-30"),10===e)return i.addClass("jqs-period-15"),!1;if(20===e)return i.addClass("jqs-period-30"),!1;var o=12*Math.floor((e-16-4)/12);t(".jqs-period-title",i).height(o)},periodData:function(i){var e=Math.round(i.position().top/this.periodPosition),o=Math.round((i.height()+i.position().top)/this.periodPosition);return{start:this.periodFormat(e),end:this.periodFormat(o),title:t(".jqs-period-title",i).text(),backgroundColor:t(".jqs-period-container",i).css("background-color"),borderColor:t(".jqs-period-container",i).css("border-top-color"),textColor:t(".jqs-period-container",i).css("color")}},periodFormat:function(t){t>=this.periodHeight&&(t=0),t<0&&(t=0);var i=Math.floor(t/this.periodInterval),e=60*(t/this.periodInterval-i);if(12===this.settings.hour){var o=i,s="";return i>=12&&(s="p"),i>12&&(o=i-12),0!==i&&24!==i||(s="",o=12),0!==e&&(o+=":"+e),o+s}return i<10&&(i="0"+i),e<10&&(e="0"+e),i+":"+e},positionFormat:function(t){var i=t.split(":"),e=parseInt(i[0]),o=parseInt(i[1]);if(12===this.settings.hour){var s=t.match(/([0-1]?[0-9]):?([0-5][0-9])?\s?(am|pm|p)?/),r=s[3];r||(r="am"),e=parseInt(s[1]),(o=parseInt(s[2]))||(o=0),12===e&&"am"===r&&(e=0),12!==e||"pm"!==r&&"p"!==r||(r="am"),"pm"!==r&&"p"!==r||(e+=12)}var n=0;return n+=e*this.periodInterval,n+=o/60*this.periodInterval,Math.floor(n)!==n?-1:n},formatHour:function(t){if(12===this.settings.hour)switch(t){case 0:case 24:t="12am";break;case 12:t="12pm";break;default:t>12?t=t-12+"pm":t+="am"}else t>=24&&(t=0),t<10&&(t="0"+t),t+=":00";return t},isValid:function(i){var e=Math.round(i.position().top),o=Math.round(i.position().top+i.height()),s=0,r=0,n=!0;return t(".jqs-period",t(i).parent()).each(function(d,a){i.attr("id")!==t(a).attr("id")&&(s=Math.round(t(a).position().top),r=Math.round(t(a).position().top+t(a).height()),s>e&&s<o&&(n=!1),r>e&&r<o&&(n=!1),s<e&&r>o&&(n=!1),s!==e&&r!==o||(n=!1))}),n},export:function(){var i=this,e=[];return t(".jqs-day",i.element).each(function(o,s){var r=[];t(".jqs-period",s).each(function(e,o){r.push(i.periodData(t(o)))}),e.push({day:o,periods:r})}),JSON.stringify(e)},import:function(i){var e=this,o=i[1],s=[];return t.each(o,function(i,o){t.each(o.periods,function(i,r){var n,d,a=t(".jqs-day",e.element).eq(o.day),p={};t.isArray(r)?(d=e.positionFormat(r[0]),n=e.positionFormat(r[1])):(d=e.positionFormat(r.start),n=e.positionFormat(r.end),p=r),0===n&&(n=e.periodHeight);var l=!0;e.add(a,d,n-d,p)||(l=!1),s.push({day:o.day,period:[e.periodFormat(d),e.periodFormat(n)],status:l})})}),JSON.stringify(s)},reset:function(){this.removeAll(this.element)}}),t.fn.jqs=function(i){var e=!1,o=Array.prototype.slice.call(arguments),r=this.each(function(){t.data(this,"plugin_jqs")?t.isFunction(s.prototype[i])&&(e=t.data(this,"plugin_jqs")[i](o)):t.data(this,"plugin_jqs",new s(this,i))});return e||r}}(jQuery,window,document);