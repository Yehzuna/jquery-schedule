/** jQuery Schedule v1.2.0 | https://github.com/Yehzuna/jquery-schedule */
!function(i,t,e,o){"use strict";function s(t,e){this.element=t,this.settings=i.extend({},n,e),this._defaults=n,this._name=r,this.init()}var r="jqs",n={debug:!1,mode:"edit",confirm:!0,hour:24,data:[],days:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],invalidPeriod:"Invalid period.",invalidPosition:"Invalid position.",removePeriod:"Remove this period ?",dialogYes:"Yes",dialogNo:"No"};i.extend(s.prototype,{init:function(){var t=this;i(this.element).addClass("jqs"),"edit"===this.settings.mode&&(i(this.element).on("click",".jqs-wrapper",function(e){if(i(e.target).hasClass("jqs-period")||i(e.target).parents(".jqs-period").length>0)return!1;var o=Math.round(e.offsetY/20);o>=48&&(o=47),t.add(i(this),"id_"+e.timeStamp,o,1)}),t.settings.confirm?i(this.element).on("click",".jqs-remove",function(){var e=i(this).parents(".jqs-period");t.dialogOpen(t.settings.removePeriod,function(){e.remove()})}):i(this.element).on("click",".jqs-remove",function(){i(this).parents(".jqs-period").remove()})),this.create(),this.generate()},create:function(){i("<table class='jqs-table'><tr></tr></table>").appendTo(i(this.element));for(var t=0;t<7;t++)i("<td><div class='jqs-wrapper'></div></td>").appendTo(i(".jqs-table tr",this.element));i("<div class='jqs-grid'><div class='jqs-grid-head'></div></div>").appendTo(i(this.element));for(var e=0;e<25;e++)i("<div class='jqs-grid-line'><div class='jqs-grid-hour'>"+this.formatHour(e)+"</div></div>").appendTo(i(".jqs-grid",this.element));for(var o=0;o<7;o++)i("<div class='jqs-grid-day'>"+this.settings.days[o]+"</div>").appendTo(i(".jqs-grid-head",this.element))},generate:function(){if(this.settings.data.length>0){var t=this;i.each(this.settings.data,function(e,o){i.each(o.periods,function(e,s){var r=i(".jqs-wrapper",t.element).eq(o.day),n=t.positionFormat(s[0]),a=t.positionFormat(s[1]);0===a&&(a=48);var d="id_"+e+o.day+n+a;t.add(r,d,n,a-n)})})}},add:function(t,e,o,s){if(s<=0)return this.settings.debug&&console.error(this.settings.invalidPeriod),!1;var r="";"edit"===this.settings.mode&&(r="<div class='jqs-remove'></div>");var n="<div class='jqs-period-title'>"+this.periodInit(o,o+s)+"</div>",a=i("<div class='jqs-period'><div class='jqs-period-container'>"+r+n+"</div></div>").css({top:20*o,height:20*s}).attr("id",e).appendTo(t);if(!this.isValid(a))return this.settings.debug&&console.error(this.settings.invalidPeriod,this.periodInit(o,o+s)),i(a).remove(),!1;if("edit"===this.settings.mode){var d=this;a.draggable({grid:[0,20],containment:"parent",drag:function(t,e){i(".jqs-period-title",e.helper).text(d.periodDrag(e))},stop:function(t,e){d.isValid(i(e.helper))||(d.settings.debug&&console.error(d.settings.invalidPosition),i(e.helper).css("top",Math.round(e.originalPosition.top)))}}).resizable({grid:[0,20],containment:"parent",handles:"n, s",resize:function(t,e){i(".jqs-period-title",e.helper).text(d.periodResize(e))},stop:function(t,e){d.isValid(i(e.helper))||(d.settings.debug&&console.error(d.settings.invalidPosition),i(e.helper).css({height:Math.round(e.originalSize.height),top:Math.round(e.originalPosition.top)}))}})}return!0},periodInit:function(i,t){return this.periodFormat(i)+" - "+this.periodFormat(t)},periodDrag:function(t){var e=Math.round(t.position.top/20),o=Math.round((i(t.helper).height()+t.position.top)/20);return this.periodFormat(e)+" - "+this.periodFormat(o)},periodResize:function(i){var t=Math.round(i.position.top/20),e=Math.round((i.size.height+i.position.top)/20);return this.periodFormat(t)+" - "+this.periodFormat(e)},periodData:function(i){var t=Math.round(i.position().top/20),e=Math.round((i.height()+i.position().top)/20);return[this.periodFormat(t),this.periodFormat(e)]},periodFormat:function(i){var t=0;if(12===this.settings.hour){var e=Math.floor(i/2),o=":30";i%2==0&&(o=""),t=e+o+"am",e>12&&(t=e-12+o+"pm"),0!==e&&24!==e||(t=12+o+"am"),12===e&&(t=12+o+"pm")}else i>=48&&(i=0),(t=Math.floor(i/2))<10&&(t="0"+t),t+=i%2==0?":00":":30";return t},positionFormat:function(i){var t=0;if(12===this.settings.hour){var e=i.match(/([0-1]?[0-9]):?([0-5][0-9])?\s?(am|pm)/),o=parseInt(e[1]),s=parseInt(e[2]),r=e[3];12===o&&"am"===r&&(o=0),12===o&&"pm"===r&&(r="am"),"pm"===r&&(o+=12),t=2*o,30===s&&t++}else{var n=i.split(":");t=2*parseInt(n[0]),30===parseInt(n[1])&&t++}return t},formatHour:function(i){if(12===this.settings.hour)switch(i){case 0:case 24:i="12 am";break;case 12:i="12 pm";break;default:i>12?i=i-12+" pm":i+=" am"}else i>=24&&(i=0),i<10&&(i="0"+i),i+=":00";return i},isValid:function(t){var e=Math.round(t.position().top),o=Math.round(t.position().top+t.height()),s=0,r=0,n=!0;return i(".jqs-period",i(t).parent()).each(function(a,d){d=i(d),t.attr("id")!==d.attr("id")&&(s=Math.round(d.position().top),r=Math.round(d.position().top+d.height()),s>e&&s<o&&(n=!1),r>e&&r<o&&(n=!1),s<e&&r>o&&(n=!1),s!==e&&r!==o||(n=!1))}),n},export:function(){var t=this,e=[];return i(".jqs-wrapper",t.element).each(function(o,s){var r={day:o,periods:[]};i(".jqs-period",s).each(function(e,o){r.periods.push(t.periodData(i(o)))}),e.push(r)}),JSON.stringify(e)},import:function(t){var e=this,o=t[1],s=[];return i.each(o,function(t,o){i.each(o.periods,function(t,r){var n=i(".jqs-wrapper",e.element).eq(o.day),a=e.positionFormat(r[0]),d=e.positionFormat(r[1]);0===d&&(d=48);var p="id_"+Date.now(),h=!0;e.add(n,p,a,d-a)||(h=!1),s.push({day:o.day,period:[e.periodFormat(a),e.periodFormat(d)],status:h})})}),JSON.stringify(s)},reset:function(){i(".jqs-period",this.element).each(function(t,e){i(e).remove()})},dialogOpen:function(t,e){var o=this;o.dialogClose();var s=i("<div class='jqs-dialog-overlay'>"),r=i(this.element).prop("scrollHeight");s.css("height",r);var n="<div class='jqs-dialog-txt'>"+t+"</div><div class='jqs-dialog-no'>"+o.settings.dialogNo+"</div><div class='jqs-dialog-yes'>"+o.settings.dialogYes+"</div>",a=i("<div class='jqs-dialog-container'><div class='jqs-dialog'>"+n+"</div></div>"),d=i(this.element).scrollTop();a.css("top",d),i(this.element).append(s).append(a),i(".jqs-dialog-yes",a).click(function(){e(),o.dialogClose()}),i(".jqs-dialog-no",a).click(function(){o.dialogClose()})},dialogClose:function(){i(".jqs-dialog-overlay, .jqs-dialog-container").remove()}}),i.fn[r]=function(t){var e=!1,o=Array.prototype.slice.call(arguments),n=this.each(function(){i.data(this,"plugin_"+r)?i.isFunction(s.prototype[t])&&(e=i.data(this,"plugin_"+r)[t](o)):i.data(this,"plugin_"+r,new s(this,t))});return e||n}}(jQuery,window,document);