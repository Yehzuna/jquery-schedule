/** jQuery Schedule v2.0.0 | https://github.com/Yehzuna/jquery-schedule */
!function(t,i,o,e){"use strict";function s(i,o){this.element=i,this.settings=t.extend({},r,o),this.periodOptions={title:this.settings.periodTitle,backgroundColor:this.settings.periodBackgroundColor,borderColor:this.settings.periodBorderColor,textColor:this.settings.periodTextColor},this.init()}var r={mode:"edit",hour:24,periodDuration:30,data:[],periodOptions:!0,periodColors:[],periodTitle:"",periodBackgroundColor:"rgba(82, 155, 255, 0.5)",periodBorderColor:"#2a3cff",periodTextColor:"#000",periodRemoveButton:"Remove",periodTitlePlaceholder:"Title",days:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],onInit:function(){},onAddPeriod:function(){},onRemovePeriod:function(){},onClickPeriod:function(){}};t.extend(s.prototype,{seed:Math.random().toString(36).substr(2),counter:0,periodInterval:0,periodHeight:0,periodPosition:0,uniqId:function(){return this.counter++,"jqs_"+this.seed+"_"+this.counter},init:function(){var i=this;if(this.settings.periodColors.length>0&&t.each(this.settings.periodColors,function(i,o){if(!t.inArray(o)||3!==o.length)throw new Error("Invalid periodColors")}),-1===t.inArray(this.settings.periodDuration,[15,30,60]))throw new Error("Invalid periodDuration");if(this.periodInterval=60/this.settings.periodDuration,this.periodHeight=24*this.periodInterval,this.periodPosition=40/this.periodInterval,t(this.element).addClass("jqs").addClass("jqs-mode-"+this.settings.mode),"edit"===this.settings.mode){var o=0,e=!1;t(this.element).on("mousedown",".jqs-day",function(s){var r=s.pageY-t(this).offset().top;if(o=Math.floor(r/i.periodPosition),!t(s.target).hasClass("jqs-period")&&0===t(s.target).parents(".jqs-period").length){var n="";15!==i.settings.periodDuration&&(n=i.periodInit(o,o+1)),e=t("<div>").addClass("jqs-period-helper").css({height:i.periodPosition,top:o*i.periodPosition}).append("<div class='jqs-period-helper-time'>"+n+"</div>"),t(this).append(e)}}),t(this.element).on("mousemove",".jqs-day",function(s){if(e){var r=s.pageY-t(this).offset().top,n=Math.round(r/i.periodPosition)-o;n<=0&&(n=1),e.css({height:n*i.periodPosition}),n>1?t(".jqs-period-helper-time",e).text(i.periodInit(o,o+n)):t(".jqs-period-helper-time",e).text("")}}),t(this.element).on("mouseup",".jqs-day",function(s){if(!t(s.target).hasClass("jqs-period")&&0===t(s.target).parents(".jqs-period").length){var r=s.pageY-t(this).offset().top,n=Math.round(r/i.periodPosition)-o;n<=0&&(n=1),i.add(t(this),o,n)}o=0,e&&(e.remove(),e=!1)}),t(this.element).on("click",".jqs-period-remove",function(){var o=t(this).parents(".jqs-period");i.settings.onRemovePeriod.call(this,o,i.element)||o.remove()})}this.create(),this.generate(),this.settings.onInit.call(this,this.element)},create:function(){t("<table class='jqs-table'><tr></tr></table>").appendTo(t(this.element));for(var i=0;i<7;i++)t("<td><div class='jqs-day'></div></td>").appendTo(t(".jqs-table tr",this.element));t("<div class='jqs-grid'><div class='jqs-grid-head'></div></div>").appendTo(t(this.element));for(var o=0;o<25;o++)t("<div class='jqs-grid-line'><div class='jqs-grid-hour'>"+this.formatHour(o)+"</div></div>").appendTo(t(".jqs-grid",this.element));for(var e=0;e<7;e++)t("<div class='jqs-grid-day'>"+this.settings.days[e]+"</div>").appendTo(t(".jqs-grid-head",this.element))},generate:function(){if(this.settings.data.length>0){var i=this;t.each(this.settings.data,function(o,e){t.each(e.periods,function(o,s){var r,n,d=t(".jqs-day",i.element).eq(e.day),a={};t.isArray(s)?(n=i.positionFormat(s[0]),r=i.positionFormat(s[1])):(n=i.positionFormat(s.start),r=i.positionFormat(s.end),a=s),0===r&&(r=i.periodHeight),i.add(d,n,r-n,a)})})}},add:function(i,o,e,s){if(e<=0||o>=this.periodHeight)return!1;s=t.extend({},this.periodOptions,s);var r="";"edit"===this.settings.mode&&(r="<div class='jqs-period-remove' title='"+this.settings.periodRemoveButton+"'></div>");var n="<div class='jqs-period-title'>"+s.title+"</div>",d="<div class='jqs-period-time'>"+this.periodInit(o,o+e)+"</div>",a=t("<div class='jqs-period'><div class='jqs-period-container'>"+d+n+r+"</div></div>").css({top:o*this.periodPosition,height:e*this.periodPosition}).attr("id",this.uniqId()).attr("title",s.title).appendTo(i);if(t(".jqs-period-container",a).css({"background-color":s.backgroundColor,"border-color":s.borderColor,color:s.textColor}),!this.isValid(a))return t(a).remove(),!1;if(this.periodText(a),"edit"===this.settings.mode){var p=this;a.draggable({grid:[0,this.periodPosition],containment:"parent",drag:function(i,o){t(".jqs-period-time",o.helper).text(p.periodDrag(o)),p.closeOptions()},stop:function(i,o){p.isValid(t(o.helper))||t(o.helper).css("top",Math.round(o.originalPosition.top))}}).resizable({grid:[0,this.periodPosition],containment:"parent",handles:"n, s",resize:function(i,o){t(".jqs-period-time",o.helper).text(p.periodResize(o)),p.periodText(a),p.closeOptions()},stop:function(i,o){p.isValid(t(o.helper))||t(o.helper).css({height:Math.round(o.originalSize.height),top:Math.round(o.originalPosition.top)})}}),this.settings.periodOptions&&a.click(function(i){t(i.target).hasClass("jqs-period-remove")||(p.settings.onClickPeriod.call(this,i,a,p.element),p.openOptions(i,a))})}return this.settings.onAddPeriod.call(this,a,this.element),!0},openOptions:function(i,o){var e=this;e.closeOptions();var s=o.offset().top-t(this.element).offset().top+t(this.element).scrollTop()-20;s<20&&(s=20),s>850&&(s=850);var r=t(this.element).width()-290,n=o.offset().left-t(this.element).offset().left+o.width()+20;n>r&&(n=n-330-o.width());var d=o.position().top/this.periodPosition,a=o.height()/this.periodPosition,p="<div class='jqs-options-time'>"+this.periodInit(d,d+a)+"</div>",h=t("jqs-period-title",o).text(),l="<div class='jqs-options-title-container'><input type='text' placeholder='"+this.settings.periodTitlePlaceholder+"' value='"+h+"' class='jqs-options-title'></div>",c="";if(this.settings.periodColors&&this.settings.periodColors.length>0){var u=12===this.settings.hour?"12pm":"00:00";c="<div class='jqs-options-color-container'>",t.each(this.settings.periodColors,function(t,i){c+="<button class='jqs-options-color' style='background-color: "+i[0]+"; border-color: "+i[1]+"; color:"+i[2]+"'>"+u+"</button>"}),c+="</div>"}var v="<div class='jqs-options-remove'>"+this.settings.periodRemoveButton+"</div>";t("<div class='jqs-options'>"+p+l+c+v+"<div class='jqs-options-close'></div></div>").css({top:s,left:n}).appendTo(this.element),t(".jqs-options-color",this.element).click(function(){t(".jqs-period-container",o).css({"background-color":t(this).css("background-color"),"border-color":t(this).css("border-top-color"),color:t(this).css("color")})}),t(".jqs-options-title",this.element).keyup(function(){t(".jqs-period-title",o).text(t(this).val()),o.attr("title",t(this).val())}),t(".jqs-options-remove",this.element).click(function(){e.settings.onRemovePeriod.call(this,o,e.element)||(o.remove(),e.closeOptions())}),t(".jqs-options-close",this.element).click(function(){e.closeOptions()})},closeOptions:function(){t(".jqs-options",this.element).remove()},periodInit:function(t,i){return this.periodFormat(t)+" - "+this.periodFormat(i)},periodDrag:function(i){var o=Math.round(i.position.top/this.periodPosition),e=Math.round((t(i.helper).height()+i.position.top)/this.periodPosition);return this.periodFormat(o)+" - "+this.periodFormat(e)},periodResize:function(t){var i=Math.round(t.position.top/this.periodPosition),o=Math.round((t.size.height+t.position.top)/this.periodPosition);return this.periodFormat(i)+" - "+this.periodFormat(o)},periodText:function(i){var o=i.height();if(i.removeClass("jqs-period-15").removeClass("jqs-period-30"),10===o)return i.addClass("jqs-period-15"),!1;if(20===o)return i.addClass("jqs-period-30"),!1;var e=12*Math.floor((o-16-4)/12);t(".jqs-period-title",i).height(e)},periodData:function(i){var o=Math.round(i.position().top/this.periodPosition),e=Math.round((i.height()+i.position().top)/this.periodPosition);return{start:this.periodFormat(o),end:this.periodFormat(e),title:t(".jqs-period-title",i).text(),backgroundColor:t(".jqs-period-container",i).css("background-color"),borderColor:t(".jqs-period-container",i).css("border-top-color"),textColor:t(".jqs-period-container",i).css("color")}},periodFormat:function(t){t>=this.periodHeight&&(t=0),t<0&&(t=0);var i=Math.floor(t/this.periodInterval),o=60*(t/this.periodInterval-i);if(12===this.settings.hour){var e=i,s="";return i>=12&&(s="p"),i>12&&(e=i-12),0!==i&&24!==i||(s="",e=12),0!==o&&(e+=":"+o),e+s}return i<10&&(i="0"+i),o<10&&(o="0"+o),i+":"+o},positionFormat:function(t){var i=t.split(":"),o=parseInt(i[0]),e=parseInt(i[1]);if(12===this.settings.hour){var s=t.match(/([0-1]?[0-9]):?([0-5][0-9])?\s?(am|pm|p)?/),r=s[3];r||(r="am"),o=parseInt(s[1]),(e=parseInt(s[2]))||(e=0),12===o&&"am"===r&&(o=0),12!==o||"pm"!==r&&"p"!==r||(r="am"),"pm"!==r&&"p"!==r||(o+=12)}var n=0;return n+=o*this.periodInterval,n+=e/60*this.periodInterval,Math.floor(n)!==n?-1:n},formatHour:function(t){if(12===this.settings.hour)switch(t){case 0:case 24:t="12am";break;case 12:t="12pm";break;default:t>12?t=t-12+"pm":t+="am"}else t>=24&&(t=0),t<10&&(t="0"+t),t+=":00";return t},isValid:function(i){var o=Math.round(i.position().top),e=Math.round(i.position().top+i.height()),s=0,r=0,n=!0;return t(".jqs-period",t(i).parent()).each(function(d,a){i.attr("id")!==t(a).attr("id")&&(s=Math.round(t(a).position().top),r=Math.round(t(a).position().top+t(a).height()),s>o&&s<e&&(n=!1),r>o&&r<e&&(n=!1),s<o&&r>e&&(n=!1),s!==o&&r!==e||(n=!1))}),n},export:function(){var i=this,o=[];return t(".jqs-day",i.element).each(function(e,s){var r=[];t(".jqs-period",s).each(function(o,e){r.push(i.periodData(t(e)))}),o.push({day:e,periods:r})}),JSON.stringify(o)},import:function(i){var o=this,e=i[1],s=[];return t.each(e,function(i,e){t.each(e.periods,function(i,r){var n,d,a=t(".jqs-day",o.element).eq(e.day),p={};t.isArray(r)?(d=o.positionFormat(r[0]),n=o.positionFormat(r[1])):(d=o.positionFormat(r.start),n=o.positionFormat(r.end),p=r),0===n&&(n=o.periodHeight);var h=!0;o.add(a,d,n-d,p)||(h=!1),s.push({day:e.day,period:[o.periodFormat(d),o.periodFormat(n)],status:h})})}),JSON.stringify(s)},reset:function(){t(".jqs-period",this.element).remove()}}),t.fn.jqs=function(i){var o=!1,e=Array.prototype.slice.call(arguments),r=this.each(function(){t.data(this,"plugin_jqs")?t.isFunction(s.prototype[i])&&(o=t.data(this,"plugin_jqs")[i](e)):t.data(this,"plugin_jqs",new s(this,i))});return o||r}}(jQuery,window,document);