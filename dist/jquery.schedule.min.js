/** jQuery Schedule v2.0.0 | https://github.com/Yehzuna/jquery-schedule */
!function(i,t,e,o){"use strict";function r(t,e){this.element=t,this.settings=i.extend({},s,e),this.init()}var s={mode:"edit",hour:24,periodDuration:30,data:[],days:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],onInit:function(){},onAddPeriod:function(){},onRemovePeriod:function(){},onPeriodClicked:function(){}};i.extend(r.prototype,{seed:Math.random().toString(36).substr(2),counter:0,periodInterval:0,periodHeight:0,periodPosition:0,uniqId:function(){return this.counter++,"jqs_"+this.seed+"_"+this.counter},init:function(){var t=this;if(-1===i.inArray(this.settings.periodDuration,[15,30,60]))throw new Error("Invalid periodDuration");this.periodInterval=60/this.settings.periodDuration,this.periodHeight=24*this.periodInterval,this.periodPosition=40/this.periodInterval,i(this.element).addClass("jqs").addClass("jqs-period-"+this.settings.periodDuration),"edit"===this.settings.mode&&(i(this.element).on("click",".jqs-day",function(e){if(i(e.target).hasClass("jqs-period")||i(e.target).parents(".jqs-period").length>0)return!1;t.add(i(this),Math.floor(e.offsetY/t.periodPosition),1)}),i(this.element).on("click",".jqs-remove",function(){var e=i(this).parents(".jqs-period");t.settings.onRemovePeriod.call(this,e,t.element)||e.remove()})),this.create(),this.generate(),this.settings.onInit.call(this,this.element)},create:function(){i("<table class='jqs-table'><tr></tr></table>").appendTo(i(this.element));for(var t=0;t<7;t++)i("<td><div class='jqs-day'></div></td>").appendTo(i(".jqs-table tr",this.element));i("<div class='jqs-grid'><div class='jqs-grid-head'></div></div>").appendTo(i(this.element));for(var e=0;e<25;e++)i("<div class='jqs-grid-line'><div class='jqs-grid-hour'>"+this.formatHour(e)+"</div></div>").appendTo(i(".jqs-grid",this.element));for(var o=0;o<7;o++)i("<div class='jqs-grid-day'>"+this.settings.days[o]+"</div>").appendTo(i(".jqs-grid-head",this.element))},generate:function(){if(this.settings.data.length>0){var t=this;i.each(this.settings.data,function(e,o){i.each(o.periods,function(e,r){var s=i(".jqs-day",t.element).eq(o.day),n=t.positionFormat(r[0]),a=t.positionFormat(r[1]);0===a&&(a=t.periodHeight),t.add(s,n,a-n)})})}},add:function(t,e,o){if(o<=0||e>=this.periodHeight)return console.error("Invalid period."),!1;var r="";"edit"===this.settings.mode&&(r="<div class='jqs-remove'></div>");var s="<div class='jqs-period-title'>"+this.periodInit(e,e+o)+"</div>",n=i("<div class='jqs-period'><div class='jqs-period-container'>"+r+s+"</div></div>").css({top:e*this.periodPosition,height:o*this.periodPosition}).attr("id",this.uniqId()).appendTo(t);if(!this.isValid(n))return console.error("Invalid period.",this.periodInit(e,e+o)),i(n).remove(),!1;if("edit"===this.settings.mode){var a=this;n.draggable({grid:[0,this.periodPosition],containment:"parent",drag:function(t,e){i(".jqs-period-title",e.helper).text(a.periodDrag(e))},stop:function(t,e){a.isValid(i(e.helper))||(console.error("Invalid position."),i(e.helper).css("top",Math.round(e.originalPosition.top)))}}).resizable({grid:[0,this.periodPosition],containment:"parent",handles:"n, s",resize:function(t,e){i(".jqs-period-title",e.helper).text(a.periodResize(e))},stop:function(t,e){a.isValid(i(e.helper))||(console.error("Invalid position."),i(e.helper).css({height:Math.round(e.originalSize.height),top:Math.round(e.originalPosition.top)}))}})}return this.settings.onAddPeriod.call(this,n,this.element),!0},periodInit:function(i,t){return this.periodFormat(i)+" - "+this.periodFormat(t)},periodDrag:function(t){var e=Math.round(t.position.top/this.periodPosition),o=Math.round((i(t.helper).height()+t.position.top)/this.periodPosition);return this.periodFormat(e)+" - "+this.periodFormat(o)},periodResize:function(i){var t=Math.round(i.position.top/this.periodPosition),e=Math.round((i.size.height+i.position.top)/this.periodPosition);return this.periodFormat(t)+" - "+this.periodFormat(e)},periodData:function(i){var t=Math.round(i.position().top/this.periodPosition),e=Math.round((i.height()+i.position().top)/this.periodPosition);return[this.periodFormat(t),this.periodFormat(e)]},periodFormat:function(i){i>=this.periodHeight&&(i=0);var t=Math.floor(i/this.periodInterval),e=60*(i/this.periodInterval-t);if(12===this.settings.hour){var o=t,r="";return t>=12&&(r="p"),t>12&&(o=t-12),0!==t&&24!==t||(r="",o=12),0!==e&&(o+=":"+e),o+r}return t<10&&(t="0"+t),e<10&&(e="0"+e),t+":"+e},positionFormat:function(i){var t=i.split(":"),e=parseInt(t[0]),o=parseInt(t[1]);if(12===this.settings.hour){var r=i.match(/([0-1]?[0-9]):?([0-5][0-9])?\s?(am|pm|p)?/),s=r[3];s||(s="am"),e=parseInt(r[1]),(o=parseInt(r[2]))||(o=0),12===e&&"am"===s&&(e=0),12!==e||"pm"!==s&&"p"!==s||(s="am"),"pm"!==s&&"p"!==s||(e+=12)}var n=0;return n+=e*this.periodInterval,n+=o/60*this.periodInterval,Math.floor(n)!==n?-1:n},formatHour:function(i){if(12===this.settings.hour)switch(i){case 0:case 24:i="12am";break;case 12:i="12pm";break;default:i>12?i=i-12+"pm":i+="am"}else i>=24&&(i=0),i<10&&(i="0"+i),i+=":00";return i},isValid:function(t){var e=Math.round(t.position().top),o=Math.round(t.position().top+t.height()),r=0,s=0,n=!0;return i(".jqs-period",i(t).parent()).each(function(a,d){t.attr("id")!==i(d).attr("id")&&(r=Math.round(i(d).position().top),s=Math.round(i(d).position().top+i(d).height()),r>e&&r<o&&(n=!1),s>e&&s<o&&(n=!1),r<e&&s>o&&(n=!1),r!==e&&s!==o||(n=!1))}),n},export:function(){var t=this,e=[];return i(".jqs-day",t.element).each(function(o,r){var s=[];i(".jqs-period",r).each(function(e,o){s.push(t.periodData(i(o)))}),e.push({day:o,periods:s})}),JSON.stringify(e)},import:function(t){var e=this,o=t[1],r=[];return i.each(o,function(t,o){i.each(o.periods,function(t,s){var n=i(".jqs-day",e.element).eq(o.day),a=e.positionFormat(s[0]),d=e.positionFormat(s[1]);0===d&&(d=e.periodHeight);var p=!0;e.add(n,a,d-a)||(p=!1),r.push({day:o.day,period:[e.periodFormat(a),e.periodFormat(d)],status:p})})}),JSON.stringify(r)},reset:function(){i(".jqs-period",this.element).remove()}}),i.fn.jqs=function(t){var e=!1,o=Array.prototype.slice.call(arguments),s=this.each(function(){i.data(this,"plugin_jqs")?i.isFunction(r.prototype[t])&&(e=i.data(this,"plugin_jqs")[t](o)):i.data(this,"plugin_jqs",new r(this,t))});return e||s}}(jQuery,window,document);